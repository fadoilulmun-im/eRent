{"title":"all-orders","type":"cms-template","lang":"","status":"SYSTEM","parent_id":"14213","content":{"type":"API","structure":"","server_on_load":"async ({\n  template,\n  params,\n  render,\n  db,\n  req,\n  reply,\n  user,\n  log,\n  ext,\n  isDev,\n}: Server) => {\n  let status = req.query.status;\n  status = (await status) ? Number(status) : null;\n\n  try {\n    if (status == null) {\n      const orders = await db.transaksi.findMany({\n        where: {\n          NOT: {\n            status_transaksi: null,\n          },\n        },\n      });\n\n      return reply.send({\n        orders,\n      });\n    } else {\n      const orders = await db.transaksi.findMany({\n        where: {\n          status_transaksi: status,\n        },\n      });\n\n      return reply.send({\n        orders,\n      });\n    }\n  } catch (e) {\n    return reply.status(500).send({\n      status: \"ERROR\",\n      message: e.message,\n    });\n  }\n}","figma":{}},"slug":"/api/orders","site":"*","id":"32367"}